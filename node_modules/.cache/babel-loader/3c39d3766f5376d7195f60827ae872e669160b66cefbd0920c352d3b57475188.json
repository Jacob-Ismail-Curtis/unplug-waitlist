{"ast":null,"code":"/* eslint-disable import/no-extraneous-dependencies */ /* eslint-disable no-shadow */import React,{useState}from'react';import{collection,addDoc,query,where,getDocs}from'firebase/firestore';import db from'../firebase';import Modal from'./Modal';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function WaitlistForm(){const[formData,setFormData]=useState({firstName:'',lastName:'',email:''});const[errors,setErrors]=useState({});const[modalOpen,setModalOpen]=useState(false);const validate=()=>{const errors={};if(!formData.firstName)errors.firstName='First name is required';if(!formData.lastName)errors.lastName='Last name is required';if(!formData.email){errors.email='Email is required';}else if(!/\\S+@\\S+\\.\\S+/.test(formData.email)){errors.email='Email is invalid';}return errors;};const handleChange=event=>{const{name,value}=event.target;setFormData({...formData,[name]:value});setErrors({...errors,[name]:''});};const handleSubmit=async e=>{e.preventDefault();const errors=validate();if(Object.keys(errors).length>0){setErrors(errors);return;}try{const q=query(collection(db,'users'),where('email','==',formData.email));const querySnapshot=await getDocs(q);if(!querySnapshot.empty){setErrors({email:'This email is already registered'});return;}const docRef=await addDoc(collection(db,'users'),formData);console.log('Document written with ID: ',docRef.id);// Handle success (e.g., show a success message to the user)\nsetModalOpen(true);setFormData({firstName:'',lastName:'',email:''});// Reset form\n}catch(error){console.error('Error adding document: ',error);// Handle error (e.g., show an error message to the user)\n}};const closeModal=()=>{setModalOpen(false);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"form\",{className:\"w-full max-w-lg\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w-1/2 pr-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"firstName\",value:formData.firstName,onChange:handleChange,placeholder:\"first name\",className:\"p-3 mb-3 border-2 border-black rounded-lg w-full text-black\",required:true}),errors.firstName&&/*#__PURE__*/_jsx(\"p\",{className:\"text-lg text-[#FFD9A1]\",children:errors.firstName})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-1/2 pl-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"lastName\",value:formData.lastName,onChange:handleChange,placeholder:\"last name\",className:\"p-3 mb-3 border-2 border-black rounded-lg w-full text-black\",required:true}),errors.lastName&&/*#__PURE__*/_jsx(\"p\",{className:\"text-lg text-[#FFD9A1]\",children:errors.lastName})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"w-2/3 pr-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",value:formData.email,onChange:handleChange,placeholder:\"email address\",className:\"p-3 mb-3 border-2 border-black rounded-lg w-full text-black\",required:true}),errors.email&&/*#__PURE__*/_jsx(\"p\",{className:\"text-lg text-[#FFD9A1]\",children:errors.email})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-1/3 pl-2\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"p-3 bg-black border-2 border-white text-white rounded-lg w-full\",children:\"join waitlist\"})})]})]}),/*#__PURE__*/_jsx(Modal,{isOpen:modalOpen,onClose:closeModal,email:formData.email})]});}export default WaitlistForm;","map":{"version":3,"names":["React","useState","collection","addDoc","query","where","getDocs","db","Modal","jsx","_jsx","jsxs","_jsxs","WaitlistForm","formData","setFormData","firstName","lastName","email","errors","setErrors","modalOpen","setModalOpen","validate","test","handleChange","event","name","value","target","handleSubmit","e","preventDefault","Object","keys","length","q","querySnapshot","empty","docRef","console","log","id","error","closeModal","children","className","onSubmit","type","onChange","placeholder","required","isOpen","onClose"],"sources":["/Users/jacobcurtis/Desktop/unplug_waitlist/src/components/WaitlistForm.js"],"sourcesContent":["/* eslint-disable import/no-extraneous-dependencies */\n/* eslint-disable no-shadow */\nimport React, { useState } from 'react';\nimport {\n  collection, addDoc, query, where, getDocs,\n} from 'firebase/firestore';\nimport db from '../firebase';\nimport Modal from './Modal';\n\nfunction WaitlistForm() {\n  const [formData, setFormData] = useState({\n    firstName: '',\n    lastName: '',\n    email: '',\n  });\n\n  const [errors, setErrors] = useState({});\n  const [modalOpen, setModalOpen] = useState(false);\n\n  const validate = () => {\n    const errors = {};\n    if (!formData.firstName) errors.firstName = 'First name is required';\n    if (!formData.lastName) errors.lastName = 'Last name is required';\n    if (!formData.email) {\n      errors.email = 'Email is required';\n    } else if (!/\\S+@\\S+\\.\\S+/.test(formData.email)) {\n      errors.email = 'Email is invalid';\n    }\n    return errors;\n  };\n\n  const handleChange = (event) => {\n    const { name, value } = event.target;\n    setFormData({\n      ...formData,\n      [name]: value,\n    });\n    setErrors({ ...errors, [name]: '' });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const errors = validate();\n    if (Object.keys(errors).length > 0) {\n      setErrors(errors);\n      return;\n    }\n\n    try {\n      const q = query(collection(db, 'users'), where('email', '==', formData.email));\n      const querySnapshot = await getDocs(q);\n\n      if (!querySnapshot.empty) {\n        setErrors({ email: 'This email is already registered' });\n        return;\n      }\n\n      const docRef = await addDoc(collection(db, 'users'), formData);\n      console.log('Document written with ID: ', docRef.id);\n      // Handle success (e.g., show a success message to the user)\n      setModalOpen(true);\n      setFormData({ firstName: '', lastName: '', email: '' }); // Reset form\n    } catch (error) {\n      console.error('Error adding document: ', error);\n      // Handle error (e.g., show an error message to the user)\n    }\n  };\n\n  const closeModal = () => {\n    setModalOpen(false);\n  };\n\n  return (\n    <div>\n      <form className=\"w-full max-w-lg\" onSubmit={handleSubmit}>\n        <div className=\"flex flex-wrap mb-4\">\n          <div className=\"w-1/2 pr-2\">\n            <input\n              type=\"text\"\n              name=\"firstName\"\n              value={formData.firstName}\n              onChange={handleChange}\n              placeholder=\"first name\"\n              className=\"p-3 mb-3 border-2 border-black rounded-lg w-full text-black\"\n              required\n            />\n            {errors.firstName && <p className=\"text-lg text-[#FFD9A1]\">{errors.firstName}</p>}\n          </div>\n          <div className=\"w-1/2 pl-2\">\n            <input\n              type=\"text\"\n              name=\"lastName\"\n              value={formData.lastName}\n              onChange={handleChange}\n              placeholder=\"last name\"\n              className=\"p-3 mb-3 border-2 border-black rounded-lg w-full text-black\"\n              required\n            />\n            {errors.lastName && <p className=\"text-lg text-[#FFD9A1]\">{errors.lastName}</p>}\n          </div>\n        </div>\n        <div className=\"flex flex-wrap mb-4\">\n          <div className=\"w-2/3 pr-2\">\n            <input\n              type=\"email\"\n              name=\"email\"\n              value={formData.email}\n              onChange={handleChange}\n              placeholder=\"email address\"\n              className=\"p-3 mb-3 border-2 border-black rounded-lg w-full text-black\"\n              required\n            />\n            {errors.email && <p className=\"text-lg text-[#FFD9A1]\">{errors.email}</p>}\n          </div>\n          <div className=\"w-1/3 pl-2\">\n            <button type=\"submit\" className=\"p-3 bg-black border-2 border-white text-white rounded-lg w-full\">\n              join waitlist\n            </button>\n          </div>\n        </div>\n      </form>\n      <Modal isOpen={modalOpen} onClose={closeModal} email={formData.email} />\n    </div>\n  );\n}\n\nexport default WaitlistForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}